<div class="w-full h-screen relative overflow-hidden bg-gray-100">
  <app-map [origin]="origin" [destination]="destination" [routeGeometry]="routeGeometry"
    [isSettingOrigin]="isSettingOrigin" [isSettingDestination]="isSettingDestination" (mapReady)="onMapReady()"
    (tokenInvalid)="onTokenInvalid()" (userLocationDetected)="onUserLocationDetected($event)"
    class="absolute inset-0 z-0">
  </app-map>

  <div class="absolute top-0 left-0 right-0 z-10">
    <div class="pb-safe h-6"></div>

    <app-user-header [userName]="userName" (avatarClick)="openProfileMenu()"></app-user-header>
  </div>

  @if (!isTokenValid) {
  <div class=" absolute top-20 left-5 right-5 z-20 p-4 bg-red-500 text-white rounded-2xl shadow-lg">
    ‚ùå API Key invalid!
  </div>
  }



  <div class="absolute bottom-0 left-0 right-0 z-30 p-4 pt-2 ">
    <div
      class="bg-gradient-to-b from-white/50 to-white/30 backdrop-blur-md rounded-3xl shadow-2xl drop-shadow-2xl flex flex-col gap-1">
      <!-- <div class="px-5 pt-5 pb-4">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center flex-shrink-0">
          <span class="text-2xl">üëã</span>
        </div>
        <div>
          <h2 class="text-xl font-bold text-gray-900">Hello there, {{ userName }}!</h2>
        </div>
      </div>
    </div> -->

      <app-location-search placeholder="Where are you going?" [suggestions]="searchSuggestions"
        [showSuggestions]="showSearchSuggestions" (searchChanged)="onSearchChanged($event)"
        (suggestionSelected)="onSuggestionSelected($event)" (searchSubmitted)="onSearchSubmitted($event)"
        (clearRoute)="onClearRoute()" class="w-full pt-5">
      </app-location-search>

      @if (routeInfo) {
      <app-route-info [routeInfo]="routeInfo" (clearRoute)="onClearRoute()"></app-route-info>
      }

      @if (routeInfo) {
      <app-vehicle-selection [selectedVehicle]="selectedVehicle" [routeInfo]="routeInfo"
        (vehicleSelected)="onVehicleSelected($event)" (bookRideClicked)="onBookRide($event)" class="px-6 pb-6">
      </app-vehicle-selection>
      }
      <!-- 
      @if (showRideNotification) {
      <app-ride-notification [ride]="rideInfo" (onClose)="onCloseRideNotification()"></app-ride-notification>
      } -->




      <!-- Safe area padding for mobile -->
    </div>
    <!-- <div class="pb-safe h-6"></div> -->

  </div>



</div>